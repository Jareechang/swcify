610279937d4d7f0ff2eb875d9d0d3531
"use strict";

var _utilities = require("./tests/utilities");

var _ = require(".");

/* eslint-env jest */
describe("swcify", () => {
  it("returns JS", () => {
    const {
      code
    } = (0, _.transformSync)((0, _utilities.trimmed)`
      import {foo} from 'bar';

      export function helloWorld() {
        console.log("hi ", foo);
      }
    `);
    expect((0, _utilities.trim)(code)).toMatch((0, _utilities.trimmed)`
    import { foo } from 'bar';
    export function helloWorld() {
        console.log(\"hi \", foo);
    }
  `);
  });
  it("respects options", () => {
    const {
      code
    } = (0, _.transformSync)((0, _utilities.trimmed)`
      async function f() {
      }
      await f();
    `, {
      jsc: {
        parser: {
          topLevelAwait: true
        },
        target: "es2017",
        externalHelpers: true
      }
    });
    expect((0, _utilities.trim)(code)).toMatch((0, _utilities.trimmed)`
    import * as swcHelpers from \"@swc/helpers\";
    function _f() {
    _f = swcHelpers.asyncToGenerator(function*() {
    });
    return _f.apply(this, arguments);
    }
    function f() {
    return _f.apply(this, arguments);
    }
    await f();
  `);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN3Y2lmeS50ZXN0LnRzIl0sIm5hbWVzIjpbImRlc2NyaWJlIiwiaXQiLCJjb2RlIiwiZXhwZWN0IiwidG9NYXRjaCIsImpzYyIsInBhcnNlciIsInRvcExldmVsQXdhaXQiLCJ0YXJnZXQiLCJleHRlcm5hbEhlbHBlcnMiXSwibWFwcGluZ3MiOiI7O0FBQ0E7O0FBQ0E7O0FBRkE7QUFJQUEsUUFBUSxDQUFDLFFBQUQsRUFBVyxNQUFNO0FBQ3ZCQyxFQUFBQSxFQUFFLENBQUMsWUFBRCxFQUFlLE1BQU07QUFDckIsVUFBTTtBQUFFQyxNQUFBQTtBQUFGLFFBQVcscUJBQ2YsdUJBQVE7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FQcUIsQ0FBakI7QUFVQUMsSUFBQUEsTUFBTSxDQUFDLHFCQUFLRCxJQUFMLENBQUQsQ0FBTixDQUFtQkUsT0FBbkIsQ0FBMkIsdUJBQVE7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUxJO0FBTUQsR0FqQkMsQ0FBRjtBQW1CQUgsRUFBQUEsRUFBRSxDQUFDLGtCQUFELEVBQXFCLE1BQU07QUFDM0IsVUFBTTtBQUFFQyxNQUFBQTtBQUFGLFFBQVcscUJBQ2YsdUJBQVE7QUFDZDtBQUNBO0FBQ0E7QUFDQSxLQUxxQixFQU1mO0FBQ0VHLE1BQUFBLEdBQUcsRUFBRTtBQUNIQyxRQUFBQSxNQUFNLEVBQUU7QUFBRUMsVUFBQUEsYUFBYSxFQUFFO0FBQWpCLFNBREw7QUFFSEMsUUFBQUEsTUFBTSxFQUFFLFFBRkw7QUFHSEMsUUFBQUEsZUFBZSxFQUFFO0FBSGQ7QUFEUCxLQU5lLENBQWpCO0FBZUFOLElBQUFBLE1BQU0sQ0FBQyxxQkFBS0QsSUFBTCxDQUFELENBQU4sQ0FBbUJFLE9BQW5CLENBQTJCLHVCQUFRO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FYSTtBQVlELEdBNUJDLENBQUY7QUE2QkQsQ0FqRE8sQ0FBUiIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1lbnYgamVzdCAqL1xuaW1wb3J0IHsgdHJpbSwgdHJpbW1lZCB9IGZyb20gXCIuL3Rlc3RzL3V0aWxpdGllc1wiO1xuaW1wb3J0IHsgdHJhbnNmb3JtU3luYyB9IGZyb20gXCIuXCI7XG5cbmRlc2NyaWJlKFwic3djaWZ5XCIsICgpID0+IHtcbiAgaXQoXCJyZXR1cm5zIEpTXCIsICgpID0+IHtcbiAgICBjb25zdCB7IGNvZGUgfSA9IHRyYW5zZm9ybVN5bmMoXG4gICAgICB0cmltbWVkYFxuICAgICAgaW1wb3J0IHtmb299IGZyb20gJ2Jhcic7XG5cbiAgICAgIGV4cG9ydCBmdW5jdGlvbiBoZWxsb1dvcmxkKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcImhpIFwiLCBmb28pO1xuICAgICAgfVxuICAgIGBcbiAgICApO1xuXG4gICAgZXhwZWN0KHRyaW0oY29kZSkpLnRvTWF0Y2godHJpbW1lZGBcbiAgICBpbXBvcnQgeyBmb28gfSBmcm9tICdiYXInO1xuICAgIGV4cG9ydCBmdW5jdGlvbiBoZWxsb1dvcmxkKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcXFwiaGkgXFxcIiwgZm9vKTtcbiAgICB9XG4gIGApO1xuICB9KTtcblxuICBpdChcInJlc3BlY3RzIG9wdGlvbnNcIiwgKCkgPT4ge1xuICAgIGNvbnN0IHsgY29kZSB9ID0gdHJhbnNmb3JtU3luYyhcbiAgICAgIHRyaW1tZWRgXG4gICAgICBhc3luYyBmdW5jdGlvbiBmKCkge1xuICAgICAgfVxuICAgICAgYXdhaXQgZigpO1xuICAgIGAsXG4gICAgICB7XG4gICAgICAgIGpzYzoge1xuICAgICAgICAgIHBhcnNlcjogeyB0b3BMZXZlbEF3YWl0OiB0cnVlIH0sXG4gICAgICAgICAgdGFyZ2V0OiBcImVzMjAxN1wiLFxuICAgICAgICAgIGV4dGVybmFsSGVscGVyczogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIH1cbiAgICApO1xuXG4gICAgZXhwZWN0KHRyaW0oY29kZSkpLnRvTWF0Y2godHJpbW1lZGBcbiAgICBpbXBvcnQgKiBhcyBzd2NIZWxwZXJzIGZyb20gXFxcIkBzd2MvaGVscGVyc1xcXCI7XG4gICAgZnVuY3Rpb24gX2YoKSB7XG4gICAgX2YgPSBzd2NIZWxwZXJzLmFzeW5jVG9HZW5lcmF0b3IoZnVuY3Rpb24qKCkge1xuICAgIH0pO1xuICAgIHJldHVybiBfZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBmKCkge1xuICAgIHJldHVybiBfZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICBhd2FpdCBmKCk7XG4gIGApO1xuICB9KTtcbn0pO1xuIl19